<?xml version="1.0" encoding="UTF-8"?>
<itop_design xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="3.1">
    <!--
    * @copyright   Copyright (C) 2024 BjÃ¶rn Rudner
    * @license     https://www.gnu.org/licenses/gpl-3.0.en.html
    -->
    <classes>
        <class id="Workstation" _delta="define">
            <parent>PhysicalDevice</parent>
            <properties>
                <category>bizmodel,searchable</category>
                <abstract>false</abstract>
                <key_type>autoincrement</key_type>
                <db_table>workstation</db_table>
                <db_key_field>id</db_key_field>
                <db_final_class_field />
                <naming>
                    <attributes>
                        <attribute id="name" />
                    </attributes>
                    <complementary_attributes>
                        <attribute id="organization_name"></attribute>
                        <attribute id="location_name"></attribute>
                    </complementary_attributes>
                </naming>
                <fields_semantic>
                    <state_attribute>status</state_attribute>
                </fields_semantic>
                <style>
                    <icon>images/workstation_256.png</icon>
                </style>
                <icon>images/workstation.png</icon>
                <reconciliation>
                    <attributes>
                        <attribute id="name" />
                        <attribute id="org_id" />
                        <attribute id="organization_name" />
                        <attribute id="location_id" />
                        <attribute id="location_name" />
                    </attributes>
                </reconciliation>
                <obsolescence>
                    <condition><![CDATA[status = 'obsolete']]></condition>
                </obsolescence>
            </properties>
            <fields>
                <field id="user_id" xsi:type="AttributeExternalKey">
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>user_id</sql>
                    <target_class>Person</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>false</allow_target_creation>
                </field>
                <field id="user_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>user_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>

                <!--
                A workstation is assigned to one user (Class: Person)
                A workstation contains:
                * one PC
                * no or one DockingStation
                * no or one Headset / Mouse / Keyboard / etc.
                * no/one/more Monitors
                * no or one Printer
                -->
                <field id="pc_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT PC AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>pc_id</sql>
                    <target_class>PC</target_class>
                    <is_null_allowed>false</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>false</allow_target_creation>
                </field>
                <field id="pc_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>pc_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="pcB_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT PC AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>pcB_id</sql>
                    <target_class>PC</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>false</allow_target_creation>
                </field>
                <field id="pcB_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>pcB_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="monitorA_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT Monitor AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>monitorA_id</sql>
                    <target_class>Monitor</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="monitorA_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>monitorA_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="monitorB_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT Monitor AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>monitorB_id</sql>
                    <target_class>Monitor</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="monitorB_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>monitorB_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="dockingstation_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT DockingStation AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>dockingstation_id</sql>
                    <target_class>DockingStation</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="dockingstation_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>dockingstation_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="keyboard_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT Keyboard AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>keyboard_id</sql>
                    <target_class>Keyboard</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="keyboard_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>keyboard_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="mouse_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT Mouse AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>mouse_id</sql>
                    <target_class>Mouse</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="mouse_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>mouse_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="headset_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT Headset AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>headset_id</sql>
                    <target_class>Headset</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="headset_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>headset_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="mobilephone_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT MobilePhone AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>mobilephone_id</sql>
                    <target_class>MobilePhone</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="mobilephone_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>mobilephone_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="telephonyA_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT TelephonyCI AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>telephonyA_id</sql>
                    <target_class>TelephonyCI</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="telephonyA_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>telephonyA_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="telephonyB_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT TelephonyCI AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>telephonyB_id</sql>
                    <target_class>TelephonyCI</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="telephonyB_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>telephonyB_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="printerA_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT Printer AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>printerA_id</sql>
                    <target_class>Printer</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="printerA_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>printerA_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="printerB_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT Printer AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>printerB_id</sql>
                    <target_class>Printer</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="printerB_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>printerB_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="scanner_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT Scanner AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>scanner_id</sql>
                    <target_class>Scanner</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="scanner_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>scanner_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
                <field id="barcodescanner_id" xsi:type="AttributeExternalKey">
                    <filter><![CDATA[SELECT BarcodeScanner AS obj JOIN Organization AS child ON obj.org_id = child.id JOIN Organization AS root ON child.parent_id BELOW root.id WHERE root.id=:this->org_id AND obj.workstation_id = 0]]></filter>
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>barcodescanner_id</sql>
                    <target_class>BarcodeScanner</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="barcodescanner_name" xsi:type="AttributeExternalField">
                    <extkey_attcode>barcodescanner_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
            </fields>
            <methods>
                <method id="GetUpdateLocations" _delta="define">
                    <static>true</static>
                    <access>public</access>
                    <type>Overload-cmdbAbstractObject</type>
                    <code>
                        <![CDATA[public static function GetUpdateLocations()
{
    $sUpdateLocations = MetaModel::GetConfig()->GetModuleSetting('br-peripherals', 'update_locations_from_workstation', 'false');
    return (bool) filter_var($sUpdateLocations, FILTER_VALIDATE_BOOLEAN);
}]]>
                    </code>
                </method>
                <method id="GetUpdateContacts" _delta="define">
                    <static>true</static>
                    <access>public</access>
                    <type>Overload-cmdbAbstractObject</type>
                    <code>
                        <![CDATA[public static function GetUpdateContacts()
{
    $sUpdateContacts = MetaModel::GetConfig()->GetModuleSetting('br-peripherals', 'update_contacts_from_workstation', 'false');
    return (bool) filter_var($sUpdateContacts, FILTER_VALIDATE_BOOLEAN);
}]]>
                    </code>
                </method>
                <method id="GetUpdateCostCenters" _delta="define">
                    <static>true</static>
                    <access>public</access>
                    <type>Overload-cmdbAbstractObject</type>
                    <code>
                        <![CDATA[public static function GetUpdateCostCenters()
{
    $sUpdateCostCenters = MetaModel::GetConfig()->GetModuleSetting('br-peripherals', 'update_costcenters_from_workstation', 'false');
    return (bool) filter_var($sUpdateCostCenters, FILTER_VALIDATE_BOOLEAN);
}]]>
                    </code>
                </method>
                <method id="GetPeripherals" _delta="define">
                    <static>true</static>
                    <access>public</access>
                    <type>Overload-cmdbAbstractObject</type>
                    <code>
                        <![CDATA[public static function GetPeripherals()
{
return array('pc_id','pcB_id','monitorA_id','monitorB_id','dockingstation_id',
             'keyboard_id','mouse_id','headset_id',
             'mobilephone_id','telephonyA_id','telephonyB_id',
             'printerA_id','printerB_id',
             'scanner_id','barcodescanner_id');
}]]>
                    </code>
                </method>
                <method id="ConnectTargetToWorkstation" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-cmdbAbstractObject</type>
                    <code>
                        <![CDATA[public function ConnectTargetToWorkstation($targetId, $updateLocation)
{
    if ($targetId != 0) {
        $oTargetObject = MetaModel::GetObject('PhysicalDevice', $targetId, false);
        if (is_object($oTargetObject)) {
            $oTargetObject->Set('workstation_id', $this->GetKey());
            if ($updateLocation)
                $oTargetObject->Set('location_id', $this->Get('location_id'));
            $oTargetObject->DBUpdate();
        }
    }
}]]>
                    </code>
                </method>
                <method id="DisconnectTargetFromWorkstation" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-cmdbAbstractObject</type>
                    <code>
                        <![CDATA[public function DisconnectTargetFromWorkstation($targetId)
{
    if ($targetId != 0) {
        $oTargetObject = MetaModel::GetObject('PhysicalDevice', $targetId, false);
        if (is_object($oTargetObject)) {
            $oTargetObject->Set('workstation_id', '');
            $oTargetObject->DBUpdate();
        }
    }
}]]>
                    </code>
                </method>
                <method id="ConnectTargetToContact">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-cmdbAbstractObject</type>
                    <code>
                        <![CDATA[public function ConnectTargetToContact($targetId, $contactId)
{
    if (($contactId != 0 ) && ($targetId != 0)) {
        $oSearch = DBSearch::FromOQL('SELECT lnkContactToFunctionalCI WHERE contact_id = :contact AND functionalci_id = :functionalci');
        $oSet = new DBObjectSet($oSearch, array(), array('contact' => $contactId, 'functionalci' => $targetId));
        if ($oSet->Count()==0) {
            $oLnk = MetaModel::NewObject("lnkContactToFunctionalCI", array('contact_id' => $contactId, 'functionalci_id' => $targetId));
            $oLnk->DBInsert();
        }
    }
}]]>
                    </code>
                </method>
                <method id="DisconnectTargetFromContact">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-cmdbAbstractObject</type>
                    <code>
                        <![CDATA[public function DisconnectTargetFromContact($targetId, $contactId)
{
    if (($contactId != 0 ) && ($targetId != 0)) {
        $oSearch = DBSearch::FromOQL('SELECT lnkContactToFunctionalCI WHERE contact_id = :contact AND functionalci_id = :functionalci');
        $oSet = new DBObjectSet($oSearch, array(), array('contact' => $contactId, 'functionalci' => $targetId));
        // Delete any found
        if ($oSet->Count()>0) {
            while($oLnk = $oSet->Fetch()) {
                $oLnk->DBDelete();
            }
        }
    }
}]]>
                    </code>
                </method>
                <method id="UpdateCostCenterOnTarget" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-cmdbAbstractObject</type>
                    <code>
                        <![CDATA[public function UpdateCostCenterOnTarget($targetId, $costcenterId)
{
    if ($targetId != 0) {
        if (MetaModel::IsValidAttCode('FunctionalCI', 'costcenter_id')) {
            $oTargetObject = MetaModel::GetObject('FunctionalCI', $targetId, false);
            if (is_object($oTargetObject)) {
                $oTargetObject->Set('costcenter_id', $costcenterId);
                $oTargetObject->DBUpdate();
            }
        }
    }
}]]>
                    </code>
                </method>
                <method id="AfterInsert" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function AfterInsert()
{
    $bUpdateLocations = self::GetUpdateLocations();
    $bUpdateContacts = self::GetUpdateContacts();
    $bUpdateCostCenters = self::GetUpdateCostCenters();
    $aPeripherals = self::GetPeripherals();

    if (($this->Get('user_id') != 0))
        $oUserId = $this->Get('user_id');
    if (MetaModel::IsValidAttCode('Workstation', 'costcenter_id'))
        if (($this->Get('costcenter_id') != 0))
            $oCostCenterId = $this->Get('costcenter_id');

    if ($bUpdateContacts && isset($oUserId))
        $this->ConnectTargetToContact($this->GetKey(), $oUserId);

    foreach ($aPeripherals as $sPeripheral) {
        if ($this->Get($sPeripheral) != 0) {
            $this->ConnectTargetToWorkstation($this->Get($sPeripheral), $bUpdateLocations);
            if ($bUpdateContacts && isset($oUserId))
                $this->ConnectTargetToContact($this->Get($sPeripheral), $oUserId);
            if ($bUpdateCostCenters && isset($oCostCenterId))
                $this->UpdateCostCenterOnTarget($this->Get($sPeripheral), $oCostCenterId);
        }
     }

    parent::AfterInsert();
}]]>
                    </code>
                </method>
                <method id="OnUpdate" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function OnUpdate()
{
    $aPeripherals = self::GetPeripherals();

    $aChanges = $this->ListChanges();
    if (array_key_exists('user_id', $aChanges)) {
        // record in the local memory object that the User was changed
        $this->bUserChanged = true;
        $oOriginalUserId = $this->GetOriginal('user_id');

        $this->DisconnectTargetFromContact($this->GetKey(), $oOriginalUserId);
        foreach ($aPeripherals as $sPeripheral) {
            if ($this->GetOriginal($sPeripheral) != 0)
                $this->DisconnectTargetFromContact($this->GetOriginal($sPeripheral), $oOriginalUserId);
        }
    }
    if (array_key_exists('pc_id', $aChanges)) {
        // record in the local memory object that the PC was changed
        $this->bPCChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('pc_id'));
    }
    if (array_key_exists('pcB_id', $aChanges)) {
        // record in the local memory object that the secondary PC was changed
        $this->bPCBChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('pcB_id'));
    }
    if (array_key_exists('monitorA_id', $aChanges)) {
        // record in the local memory object that the MonitorA was changed
        $this->bMonitorAChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('monitorA_id'));
    }
    if (array_key_exists('monitorB_id', $aChanges)) {
        // record in the local memory object that the MonitorB was changed
        $this->bMonitorBChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('monitorB_id'));
    }
    if (array_key_exists('dockingstation_id', $aChanges)) {
        // record in the local memory object that the DockingStation was changed
        $this->bDockingStationChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('dockingstation_id'));
    }
    if (array_key_exists('keyboard_id', $aChanges)) {
        // record in the local memory object that the Keyboard was changed
        $this->bKeyboardChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('keyboard_id'));
    }
    if (array_key_exists('mouse_id', $aChanges)) {
        // record in the local memory object that the Mouse was changed
        $this->bMouseChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('mouse_id'));
    }
    if (array_key_exists('headset_id', $aChanges)) {
        // record in the local memory object that the Headset was changed
        $this->bHeadsetChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('headset_id'));
    }
    if (array_key_exists('mobilephone_id', $aChanges)) {
        // record in the local memory object that the MobilePhone was changed
        $this->bMobilePhoneChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('mobilephone_id'));
    }
    if (array_key_exists('telephonyA_id', $aChanges)) {
        // record in the local memory object that the TelephonyA was changed
        $this->bTelephonyAChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('telephonyA_id'));
    }
    if (array_key_exists('telephonyB_id', $aChanges)) {
        // record in the local memory object that the TelephonyB was changed
        $this->bTelephonyBChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('telephonyB_id'));
    }
    if (array_key_exists('printerA_id', $aChanges)) {
        // record in the local memory object that the PrinterA was changed
        $this->bPrinterAChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('printerA_id'));
    }
    if (array_key_exists('printerB_id', $aChanges)) {
        // record in the local memory object that the PrinterB was changed
        $this->bPrinterBChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('printerB_id'));
    }
    if (array_key_exists('scanner_id', $aChanges)) {
        // record in the local memory object that the Scanner was changed
        $this->bScannerChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('scanner_id'));
    }
    if (array_key_exists('barcodescanner_id', $aChanges)) {
        // record in the local memory object that the BarcodeScanner was changed
        $this->bBarcodeScannerChanged = true;
        // disconnect the old Workstation
        $this->DisconnectTargetFromWorkstation($this->GetOriginal('barcodescanner_id'));
    }
    // change locations on assigned objects when location of workstation is changed
    if (array_key_exists('location_id', $aChanges)) {
        // record in the local memory object that the Location was changed
        $this->bLocationChanged = true;
    }
    // change costcenter on assigned objects when costcenter of workstation is changed
    if (array_key_exists('costcenter_id', $aChanges)) {
        // record in the local memory object that the CostCenter was changed
        $this->bCostCenterChanged = true;
    }

    parent::OnUpdate();
}]]>
                    </code>
                </method>
                <method id="AfterUpdate" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function AfterUpdate()
{
    $bUpdateLocations = self::GetUpdateLocations();
    $bUpdateContacts = self::GetUpdateContacts();
    $bUpdateCostCenters = self::GetUpdateCostCenters();
    $aPeripherals = self::GetPeripherals();

    // The Workstation is updated in DB and assigned Peripherals changed
    if (isset($this->bPCChanged))
        $this->ConnectTargetToWorkstation($this->Get('pc_id'), $bUpdateLocations);
    if (isset($this->bPCBChanged))
        $this->ConnectTargetToWorkstation($this->Get('pcB_id'), $bUpdateLocations);
    if (isset($this->bMonitorAChanged))
        $this->ConnectTargetToWorkstation($this->Get('monitorA_id'), $bUpdateLocations);
    if (isset($this->bMonitorBChanged))
        $this->ConnectTargetToWorkstation($this->Get('monitorB_id'), $bUpdateLocations);
    if (isset($this->bDockingStationChanged))
        $this->ConnectTargetToWorkstation($this->Get('dockingstation_id'), $bUpdateLocations);
    if (isset($this->bKeyboardChanged))
        $this->ConnectTargetToWorkstation($this->Get('keyboard_id'), $bUpdateLocations);
    if (isset($this->bMouseChanged))
        $this->ConnectTargetToWorkstation($this->Get('mouse_id'), $bUpdateLocations);
    if (isset($this->bHeadsetChanged))
        $this->ConnectTargetToWorkstation($this->Get('headset_id'), $bUpdateLocations);
    if (isset($this->bMobilePhoneChanged))
        $this->ConnectTargetToWorkstation($this->Get('mobilephone_id'), $bUpdateLocations);
    if (isset($this->bTelephonyAChanged))
        $this->ConnectTargetToWorkstation($this->Get('telephonyA_id'), $bUpdateLocations);
    if (isset($this->bTelephonyBChanged))
        $this->ConnectTargetToWorkstation($this->Get('telephonyB_id'), $bUpdateLocations);
    if (isset($this->bPrinterAChanged))
        $this->ConnectTargetToWorkstation($this->Get('printerA_id'), $bUpdateLocations);
    if (isset($this->bPrinterBChanged))
        $this->ConnectTargetToWorkstation($this->Get('printerB_id'), $bUpdateLocations);
    if (isset($this->bScannerChanged))
        $this->ConnectTargetToWorkstation($this->Get('scanner_id'), $bUpdateLocations);
    if (isset($this->bBarcodeScannerChanged))
        $this->ConnectTargetToWorkstation($this->Get('barcodescanner_id'), $bUpdateLocations);

    // change locations on assigned objects when location of workstation is changed
    if (isset($this->bLocationChanged) && $bUpdateLocations)
    {
        foreach ($aPeripherals as $sPeripheral) {
            if ($this->Get($sPeripheral) != 0)
                $this->ConnectTargetToWorkstation($this->Get($sPeripheral), $bUpdateLocations);
        }
    }

    // add contacts on assigned objects after every update
    if ($bUpdateContacts && ($this->Get('user_id') != 0))
    {
        $this->ConnectTargetToContact($this->GetKey(), $this->Get('user_id'));
        foreach ($aPeripherals as $sPeripheral) {
            if ($this->Get($sPeripheral) != 0)
                $this->ConnectTargetToContact($this->Get($sPeripheral), $this->Get('user_id'));
        }
    }

    // change costcenter on assigned objects when costcenter of workstation is changed
    if (isset($this->bCostCenterChanged) && $bUpdateCostCenters) {
        // only run update when CostCenter-Extension is installed
        if (MetaModel::IsValidAttCode('FunctionalCI', 'costcenter_id'))
            if (($this->Get('costcenter_id') != 0))
                foreach ($aPeripherals as $sPeripheral) {
                    if ($this->Get($sPeripheral) != 0)
                        $this->UpdateCostCenterOnTarget($this->Get($sPeripheral), $this->Get('costcenter_id'));
                }
    }

    parent::AfterUpdate();
}]]>
                    </code>
                </method>
                <method id="OnDelete" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function OnDelete()
{
    $aPeripherals = self::GetPeripherals();

    $aChanges = $this->ListChanges();
    if (array_key_exists('user_id', $aChanges))
        $this->DisconnectTargetFromContact($this->GetKey(), $this->Get('user_id'));

    foreach ($aPeripherals as $sPeripheral) {
        if (array_key_exists($sPeripheral, $aChanges))
            $this->DisconnectTargetFromWorkstation($this->Get(sPeripheral));
    }

    parent::OnDelete();
}]]>
                    </code>
                </method>
            </methods>
            <relations>
                <relation id="impacts">
                    <neighbours>
                        <neighbour id="user" _delta="define">
                            <attribute>user_id</attribute>
                        </neighbour>
                    </neighbours>
                </relation>
            </relations>
            <presentation>
                <details>
                    <items>
                        <item id="col:col1">
                            <rank>10</rank>
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <rank>10</rank>
                                    <items>
                                        <item id="name">
                                            <rank>10</rank>
                                        </item>
                                        <item id="org_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="status">
                                            <rank>30</rank>
                                        </item>
                                        <item id="business_criticity">
                                            <rank>40</rank>
                                        </item>
                                        <item id="location_id">
                                            <rank>50</rank>
                                        </item>
                                        <item id="user_id">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Workstation:desktop">
                                    <rank>20</rank>
                                    <items>
                                        <item id="pc_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="pcB_id">
                                            <rank>15</rank>
                                        </item>
                                        <item id="monitorA_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="monitorB_id">
                                            <rank>30</rank>
                                        </item>
                                        <item id="dockingstation_id">
                                            <rank>40</rank>
                                        </item>
                                        <item id="keyboard_id">
                                            <rank>50</rank>
                                        </item>
                                        <item id="mouse_id">
                                            <rank>60</rank>
                                        </item>
                                        <item id="headset_id">
                                            <rank>70</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Workstation:telephony">
                                    <rank>30</rank>
                                    <items>
                                        <item id="mobilephone_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="telephonyA_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="telephonyB_id">
                                            <rank>30</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Workstation:printerscanner">
                                    <rank>30</rank>
                                    <items>
                                        <item id="printerA_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="printerB_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="scanner_id">
                                            <rank>30</rank>
                                        </item>
                                        <item id="barcodescanner_id">
                                            <rank>40</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="col:col2">
                            <rank>20</rank>
                            <items>
                                <item id="fieldset:Server:otherinfo">
                                    <rank>10</rank>
                                    <items>
                                        <item id="description">
                                            <rank>10</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="contacts_list">
                            <rank>200</rank>
                        </item>
                        <item id="documents_list">
                            <rank>210</rank>
                        </item>
                    </items>
                </details>
                <default_search>
                    <items>
                        <item id="friendlyname">
                            <rank>10</rank>
                        </item>
                        <item id="location_id">
                            <rank>20</rank>
                        </item>
                        <item id="org_id">
                            <rank>30</rank>
                        </item>
                    </items>
                </default_search>
                <search>
                    <items>
                        <item id="name">
                            <rank>10</rank>
                        </item>
                        <item id="org_id">
                            <rank>20</rank>
                        </item>
                        <item id="status">
                            <rank>30</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>40</rank>
                        </item>
                        <item id="location_id">
                            <rank>50</rank>
                        </item>
                        <item id="pc_id">
                            <rank>60</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="status">
                            <rank>20</rank>
                        </item>
                        <item id="location_id">
                            <rank>30</rank>
                        </item>
                        <item id="user_id">
                            <rank>40</rank>
                        </item>
                        <item id="pc_id">
                            <rank>50</rank>
                        </item>
                    </items>
                </list>
            </presentation>
        </class>
        <class id="PC" _delta="must_exist">
            <methods>
                <method id="GetAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <presentation>
                <details>
                    <items>
                        <item id="col:col1">
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <items>
                                        <item id="workstation_id" _delta="define">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                    </items>
                </details>
                <search>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>45</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>35</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>25</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="Printer" _delta="must_exist">
            <methods>
                <method id="GetAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <presentation>
                <details>
                    <items>
                        <item id="col:col1">
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <items>
                                        <item id="workstation_id" _delta="define">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                    </items>
                </details>
                <search>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>45</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>35</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>25</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="PhysicalDevice" _delta="must_exist">
            <fields>
                <field id="workstation_id" xsi:type="AttributeExternalKey" _delta="define">
                    <dependencies>
                        <attribute id="org_id" />
                    </dependencies>
                    <sql>workstation_id</sql>
                    <target_class>Workstation</target_class>
                    <is_null_allowed>true</is_null_allowed>
                    <on_target_delete>DEL_MANUAL</on_target_delete>
                    <allow_target_creation>true</allow_target_creation>
                </field>
                <field id="workstation_name" xsi:type="AttributeExternalField" _delta="define">
                    <extkey_attcode>workstation_id</extkey_attcode>
                    <target_attcode>name</target_attcode>
                </field>
            </fields>
            <relations>
                <relation id="impacts">
                    <neighbours>
                        <neighbour id="workstation" _delta="define">
                            <attribute>workstation_id</attribute>
                        </neighbour>
                    </neighbours>
                </relation>
            </relations>
        </class>
        <class id="TelephonyCI" _delta="must_exist">
            <methods>
                <method id="GetAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <presentation>
                <details>
                    <items>
                        <item id="col:col1">
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <items>
                                        <item id="workstation_id" _delta="define">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                    </items>
                </details>
                <search>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>45</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>35</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>25</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="DockingStation" _delta="define">
            <parent>ConnectableCI</parent>
            <properties>
                <category>bizmodel,searchable</category>
                <abstract>false</abstract>
                <key_type>autoincrement</key_type>
                <db_table>dockingstation</db_table>
                <db_key_field>id</db_key_field>
                <db_final_class_field />
                <naming>
                    <attributes>
                        <attribute id="name" />
                    </attributes>
                </naming>
                <fields_semantic>
                    <state_attribute>status</state_attribute>
                </fields_semantic>
                <style>
                    <icon>images/usb-hub_256.png</icon>
                </style>
                <icon>images/usb-hub.png</icon>
                <reconciliation>
                    <attributes>
                        <attribute id="name" />
                        <attribute id="org_id" />
                        <attribute id="organization_name" />
                    </attributes>
                </reconciliation>
            </properties>
            <fields />
            <methods>
                <method id="GetAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <relations>
                <relation id="impacts">
                    <neighbours>
                        <neighbour id="workstation">
                            <attribute>workstation_id</attribute>
                        </neighbour>
                    </neighbours>
                </relation>
            </relations>
            <presentation>
                <details>
                    <items>
                        <item id="col:col1">
                            <rank>10</rank>
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <rank>10</rank>
                                    <items>
                                        <item id="name">
                                            <rank>10</rank>
                                        </item>
                                        <item id="org_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="status">
                                            <rank>30</rank>
                                        </item>
                                        <item id="business_criticity">
                                            <rank>40</rank>
                                        </item>
                                        <item id="location_id">
                                            <rank>50</rank>
                                        </item>
                                        <item id="workstation_id">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:moreinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="brand_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="model_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="serialnumber">
                                            <rank>80</rank>
                                        </item>
                                        <item id="asset_number">
                                            <rank>90</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="col:col2">
                            <rank>20</rank>
                            <items>
                                <item id="fieldset:Server:Date">
                                    <rank>10</rank>
                                    <items>
                                        <item id="move2production">
                                            <rank>10</rank>
                                        </item>
                                        <item id="purchase_date">
                                            <rank>20</rank>
                                        </item>
                                        <item id="end_of_warranty">
                                            <rank>30</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:otherinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="description">
                                            <rank>10</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="contacts_list">
                            <rank>100</rank>
                        </item>
                        <item id="documents_list">
                            <rank>110</rank>
                        </item>
                        <item id="physicalinterface_list">
                            <rank>120</rank>
                        </item>
                        <item id="networkdevice_list">
                            <rank>130</rank>
                        </item>
                        <item id="providercontracts_list">
                            <rank>140</rank>
                        </item>
                        <item id="services_list">
                            <rank>150</rank>
                        </item>
                    </items>
                </details>
                <default_search>
                    <items>
                        <item id="friendlyname">
                            <rank>10</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>20</rank>
                        </item>
                        <item id="location_id">
                            <rank>30</rank>
                        </item>
                        <item id="org_id">
                            <rank>40</rank>
                        </item>
                    </items>
                </default_search>
                <search>
                    <items>
                        <item id="name">
                            <rank>10</rank>
                        </item>
                        <item id="org_id">
                            <rank>20</rank>
                        </item>
                        <item id="status">
                            <rank>30</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>40</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>50</rank>
                        </item>
                        <item id="location_id">
                            <rank>60</rank>
                        </item>
                        <item id="brand_id">
                            <rank>70</rank>
                        </item>
                        <item id="model_id">
                            <rank>80</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>90</rank>
                        </item>
                        <item id="asset_number">
                            <rank>100</rank>
                        </item>
                        <item id="move2production">
                            <rank>110</rank>
                        </item>
                        <item id="purchase_date">
                            <rank>120</rank>
                        </item>
                        <item id="end_of_warranty">
                            <rank>130</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="status">
                            <rank>20</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>30</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>40</rank>
                        </item>
                        <item id="location_id">
                            <rank>50</rank>
                        </item>
                        <item id="brand_id">
                            <rank>60</rank>
                        </item>
                        <item id="model_id">
                            <rank>70</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>80</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="location_id">
                            <rank>20</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>30</rank>
                        </item>
                        <item id="brand_id">
                            <rank>40</rank>
                        </item>
                        <item id="model_id">
                            <rank>50</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="Monitor" _delta="define">
            <parent>Peripheral</parent>
            <properties>
                <category>bizmodel,searchable</category>
                <abstract>false</abstract>
                <key_type>autoincrement</key_type>
                <db_table>monitor</db_table>
                <db_key_field>id</db_key_field>
                <db_final_class_field />
                <naming>
                    <attributes>
                        <attribute id="name" />
                    </attributes>
                </naming>
                <fields_semantic>
                    <state_attribute>status</state_attribute>
                </fields_semantic>
                <style>
                    <icon>images/monitor_256.png</icon>
                </style>
                <icon>images/monitor.png</icon>
                <reconciliation>
                    <attributes>
                        <attribute id="name" />
                        <attribute id="org_id" />
                        <attribute id="organization_name" />
                    </attributes>
                </reconciliation>
            </properties>
            <methods>
                <method id="GetAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <presentation>
                <details>
                    <items>
                        <item id="col:col1">
                            <rank>10</rank>
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <rank>10</rank>
                                    <items>
                                        <item id="name">
                                            <rank>10</rank>
                                        </item>
                                        <item id="org_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="status">
                                            <rank>30</rank>
                                        </item>
                                        <item id="business_criticity">
                                            <rank>40</rank>
                                        </item>
                                        <item id="location_id">
                                            <rank>50</rank>
                                        </item>
                                        <item id="workstation_id">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:moreinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="brand_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="model_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="serialnumber">
                                            <rank>80</rank>
                                        </item>
                                        <item id="asset_number">
                                            <rank>90</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="col:col2">
                            <rank>20</rank>
                            <items>
                                <item id="fieldset:Server:Date">
                                    <rank>10</rank>
                                    <items>
                                        <item id="move2production">
                                            <rank>10</rank>
                                        </item>
                                        <item id="purchase_date">
                                            <rank>20</rank>
                                        </item>
                                        <item id="end_of_warranty">
                                            <rank>30</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:otherinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="description">
                                            <rank>10</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="contacts_list">
                            <rank>100</rank>
                        </item>
                        <item id="documents_list">
                            <rank>110</rank>
                        </item>
                        <item id="providercontracts_list">
                            <rank>120</rank>
                        </item>
                        <item id="services_list">
                            <rank>130</rank>
                        </item>
                    </items>
                </details>
                <default_search>
                    <items>
                        <item id="friendlyname">
                            <rank>10</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>20</rank>
                        </item>
                        <item id="location_id">
                            <rank>30</rank>
                        </item>
                        <item id="org_id">
                            <rank>40</rank>
                        </item>
                    </items>
                </default_search>
                <search>
                    <items>
                        <item id="name">
                            <rank>10</rank>
                        </item>
                        <item id="org_id">
                            <rank>20</rank>
                        </item>
                        <item id="status">
                            <rank>30</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>40</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>50</rank>
                        </item>
                        <item id="location_id">
                            <rank>60</rank>
                        </item>
                        <item id="brand_id">
                            <rank>70</rank>
                        </item>
                        <item id="model_id">
                            <rank>80</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>90</rank>
                        </item>
                        <item id="asset_number">
                            <rank>100</rank>
                        </item>
                        <item id="move2production">
                            <rank>110</rank>
                        </item>
                        <item id="purchase_date">
                            <rank>120</rank>
                        </item>
                        <item id="end_of_warranty">
                            <rank>130</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="status">
                            <rank>20</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>30</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>40</rank>
                        </item>
                        <item id="location_id">
                            <rank>50</rank>
                        </item>
                        <item id="brand_id">
                            <rank>60</rank>
                        </item>
                        <item id="model_id">
                            <rank>70</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>80</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="location_id">
                            <rank>20</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>30</rank>
                        </item>
                        <item id="brand_id">
                            <rank>40</rank>
                        </item>
                        <item id="model_id">
                            <rank>50</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="Keyboard" _delta="define">
            <parent>Peripheral</parent>
            <properties>
                <category>bizmodel,searchable</category>
                <abstract>false</abstract>
                <key_type>autoincrement</key_type>
                <db_table>keyboard</db_table>
                <db_key_field>id</db_key_field>
                <db_final_class_field />
                <naming>
                    <attributes>
                        <attribute id="name" />
                    </attributes>
                </naming>
                <fields_semantic>
                    <state_attribute>status</state_attribute>
                </fields_semantic>
                <style>
                    <icon>images/keyboard_256.png</icon>
                </style>
                <icon>images/keyboard.png</icon>
                <reconciliation>
                    <attributes>
                        <attribute id="name" />
                        <attribute id="org_id" />
                        <attribute id="organization_name" />
                    </attributes>
                </reconciliation>
            </properties>
            <methods>
                <method id="GetAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <presentation>
                <details>
                    <items>
                        <item id="col:col1">
                            <rank>10</rank>
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <rank>10</rank>
                                    <items>
                                        <item id="name">
                                            <rank>10</rank>
                                        </item>
                                        <item id="org_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="status">
                                            <rank>30</rank>
                                        </item>
                                        <item id="business_criticity">
                                            <rank>40</rank>
                                        </item>
                                        <item id="location_id">
                                            <rank>50</rank>
                                        </item>
                                        <item id="workstation_id">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:moreinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="brand_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="model_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="serialnumber">
                                            <rank>80</rank>
                                        </item>
                                        <item id="asset_number">
                                            <rank>90</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="col:col2">
                            <rank>20</rank>
                            <items>
                                <item id="fieldset:Server:Date">
                                    <rank>10</rank>
                                    <items>
                                        <item id="move2production">
                                            <rank>10</rank>
                                        </item>
                                        <item id="purchase_date">
                                            <rank>20</rank>
                                        </item>
                                        <item id="end_of_warranty">
                                            <rank>30</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:otherinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="description">
                                            <rank>10</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="contacts_list">
                            <rank>100</rank>
                        </item>
                        <item id="documents_list">
                            <rank>110</rank>
                        </item>
                        <item id="providercontracts_list">
                            <rank>120</rank>
                        </item>
                        <item id="services_list">
                            <rank>130</rank>
                        </item>
                    </items>
                </details>
                <default_search>
                    <items>
                        <item id="friendlyname">
                            <rank>10</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>20</rank>
                        </item>
                        <item id="location_id">
                            <rank>30</rank>
                        </item>
                        <item id="org_id">
                            <rank>40</rank>
                        </item>
                    </items>
                </default_search>
                <search>
                    <items>
                        <item id="name">
                            <rank>10</rank>
                        </item>
                        <item id="org_id">
                            <rank>20</rank>
                        </item>
                        <item id="status">
                            <rank>30</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>40</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>50</rank>
                        </item>
                        <item id="location_id">
                            <rank>60</rank>
                        </item>
                        <item id="brand_id">
                            <rank>70</rank>
                        </item>
                        <item id="model_id">
                            <rank>80</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>90</rank>
                        </item>
                        <item id="asset_number">
                            <rank>100</rank>
                        </item>
                        <item id="move2production">
                            <rank>110</rank>
                        </item>
                        <item id="purchase_date">
                            <rank>120</rank>
                        </item>
                        <item id="end_of_warranty">
                            <rank>130</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="status">
                            <rank>20</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>30</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>40</rank>
                        </item>
                        <item id="location_id">
                            <rank>50</rank>
                        </item>
                        <item id="brand_id">
                            <rank>60</rank>
                        </item>
                        <item id="model_id">
                            <rank>70</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>80</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="location_id">
                            <rank>20</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>30</rank>
                        </item>
                        <item id="brand_id">
                            <rank>40</rank>
                        </item>
                        <item id="model_id">
                            <rank>50</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="Mouse" _delta="define">
            <parent>Peripheral</parent>
            <properties>
                <category>bizmodel,searchable</category>
                <abstract>false</abstract>
                <key_type>autoincrement</key_type>
                <db_table>mouse</db_table>
                <db_key_field>id</db_key_field>
                <db_final_class_field />
                <naming>
                    <attributes>
                        <attribute id="name" />
                    </attributes>
                </naming>
                <fields_semantic>
                    <state_attribute>status</state_attribute>
                </fields_semantic>
                <style>
                    <icon>images/mouse_256.png</icon>
                </style>
                <icon>images/mouse.png</icon>
                <reconciliation>
                    <attributes>
                        <attribute id="name" />
                        <attribute id="org_id" />
                        <attribute id="organization_name" />
                    </attributes>
                </reconciliation>
            </properties>
            <methods>
                <method id="GetAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <presentation>
                <details>
                    <items>
                        <item id="col:col1">
                            <rank>10</rank>
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <rank>10</rank>
                                    <items>
                                        <item id="name">
                                            <rank>10</rank>
                                        </item>
                                        <item id="org_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="status">
                                            <rank>30</rank>
                                        </item>
                                        <item id="business_criticity">
                                            <rank>40</rank>
                                        </item>
                                        <item id="location_id">
                                            <rank>50</rank>
                                        </item>
                                        <item id="workstation_id">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:moreinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="brand_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="model_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="serialnumber">
                                            <rank>80</rank>
                                        </item>
                                        <item id="asset_number">
                                            <rank>90</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="col:col2">
                            <rank>20</rank>
                            <items>
                                <item id="fieldset:Server:Date">
                                    <rank>10</rank>
                                    <items>
                                        <item id="move2production">
                                            <rank>10</rank>
                                        </item>
                                        <item id="purchase_date">
                                            <rank>20</rank>
                                        </item>
                                        <item id="end_of_warranty">
                                            <rank>30</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:otherinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="description">
                                            <rank>10</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="contacts_list">
                            <rank>100</rank>
                        </item>
                        <item id="documents_list">
                            <rank>110</rank>
                        </item>
                        <item id="providercontracts_list">
                            <rank>120</rank>
                        </item>
                        <item id="services_list">
                            <rank>130</rank>
                        </item>
                    </items>
                </details>
                <default_search>
                    <items>
                        <item id="friendlyname">
                            <rank>10</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>20</rank>
                        </item>
                        <item id="location_id">
                            <rank>30</rank>
                        </item>
                        <item id="org_id">
                            <rank>40</rank>
                        </item>
                    </items>
                </default_search>
                <search>
                    <items>
                        <item id="name">
                            <rank>10</rank>
                        </item>
                        <item id="org_id">
                            <rank>20</rank>
                        </item>
                        <item id="status">
                            <rank>30</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>40</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>50</rank>
                        </item>
                        <item id="location_id">
                            <rank>60</rank>
                        </item>
                        <item id="brand_id">
                            <rank>70</rank>
                        </item>
                        <item id="model_id">
                            <rank>80</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>90</rank>
                        </item>
                        <item id="asset_number">
                            <rank>100</rank>
                        </item>
                        <item id="move2production">
                            <rank>110</rank>
                        </item>
                        <item id="purchase_date">
                            <rank>120</rank>
                        </item>
                        <item id="end_of_warranty">
                            <rank>130</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="status">
                            <rank>20</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>30</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>40</rank>
                        </item>
                        <item id="location_id">
                            <rank>50</rank>
                        </item>
                        <item id="brand_id">
                            <rank>60</rank>
                        </item>
                        <item id="model_id">
                            <rank>70</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>80</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="location_id">
                            <rank>20</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>30</rank>
                        </item>
                        <item id="brand_id">
                            <rank>40</rank>
                        </item>
                        <item id="model_id">
                            <rank>50</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="Headset" _delta="define">
            <parent>Peripheral</parent>
            <properties>
                <category>bizmodel,searchable</category>
                <abstract>false</abstract>
                <key_type>autoincrement</key_type>
                <db_table>headset</db_table>
                <db_key_field>id</db_key_field>
                <db_final_class_field />
                <naming>
                    <attributes>
                        <attribute id="name" />
                    </attributes>
                </naming>
                <fields_semantic>
                    <state_attribute>status</state_attribute>
                </fields_semantic>
                <style>
                    <icon>images/headset_256.png</icon>
                </style>
                <icon>images/headset.png</icon>
                <reconciliation>
                    <attributes>
                        <attribute id="name" />
                        <attribute id="org_id" />
                        <attribute id="organization_name" />
                    </attributes>
                </reconciliation>
            </properties>
            <methods>
                <method id="GetAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <presentation>
                <details>
                    <items>
                        <item id="col:col1">
                            <rank>10</rank>
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <rank>10</rank>
                                    <items>
                                        <item id="name">
                                            <rank>10</rank>
                                        </item>
                                        <item id="org_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="status">
                                            <rank>30</rank>
                                        </item>
                                        <item id="business_criticity">
                                            <rank>40</rank>
                                        </item>
                                        <item id="location_id">
                                            <rank>50</rank>
                                        </item>
                                        <item id="workstation_id">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:moreinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="brand_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="model_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="serialnumber">
                                            <rank>80</rank>
                                        </item>
                                        <item id="asset_number">
                                            <rank>90</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="col:col2">
                            <rank>20</rank>
                            <items>
                                <item id="fieldset:Server:Date">
                                    <rank>10</rank>
                                    <items>
                                        <item id="move2production">
                                            <rank>10</rank>
                                        </item>
                                        <item id="purchase_date">
                                            <rank>20</rank>
                                        </item>
                                        <item id="end_of_warranty">
                                            <rank>30</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:otherinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="description">
                                            <rank>10</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="contacts_list">
                            <rank>100</rank>
                        </item>
                        <item id="documents_list">
                            <rank>110</rank>
                        </item>
                        <item id="providercontracts_list">
                            <rank>120</rank>
                        </item>
                        <item id="services_list">
                            <rank>130</rank>
                        </item>
                    </items>
                </details>
                <default_search>
                    <items>
                        <item id="friendlyname">
                            <rank>10</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>20</rank>
                        </item>
                        <item id="location_id">
                            <rank>30</rank>
                        </item>
                        <item id="org_id">
                            <rank>40</rank>
                        </item>
                    </items>
                </default_search>
                <search>
                    <items>
                        <item id="name">
                            <rank>10</rank>
                        </item>
                        <item id="org_id">
                            <rank>20</rank>
                        </item>
                        <item id="status">
                            <rank>30</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>40</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>50</rank>
                        </item>
                        <item id="location_id">
                            <rank>60</rank>
                        </item>
                        <item id="brand_id">
                            <rank>70</rank>
                        </item>
                        <item id="model_id">
                            <rank>80</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>90</rank>
                        </item>
                        <item id="asset_number">
                            <rank>100</rank>
                        </item>
                        <item id="move2production">
                            <rank>110</rank>
                        </item>
                        <item id="purchase_date">
                            <rank>120</rank>
                        </item>
                        <item id="end_of_warranty">
                            <rank>130</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="status">
                            <rank>20</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>30</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>40</rank>
                        </item>
                        <item id="location_id">
                            <rank>50</rank>
                        </item>
                        <item id="brand_id">
                            <rank>60</rank>
                        </item>
                        <item id="model_id">
                            <rank>70</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>80</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="location_id">
                            <rank>20</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>30</rank>
                        </item>
                        <item id="brand_id">
                            <rank>40</rank>
                        </item>
                        <item id="model_id">
                            <rank>50</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="Scanner" _delta="define">
            <parent>Peripheral</parent>
            <properties>
                <category>bizmodel,searchable</category>
                <abstract>false</abstract>
                <key_type>autoincrement</key_type>
                <db_table>scanner</db_table>
                <db_key_field>id</db_key_field>
                <db_final_class_field />
                <naming>
                    <attributes>
                        <attribute id="name" />
                    </attributes>
                </naming>
                <fields_semantic>
                    <state_attribute>status</state_attribute>
                </fields_semantic>
                <style>
                    <icon>images/scanner_256.png</icon>
                </style>
                <icon>images/scanner.png</icon>
                <reconciliation>
                    <attributes>
                        <attribute id="name" />
                        <attribute id="org_id" />
                        <attribute id="organization_name" />
                    </attributes>
                </reconciliation>
            </properties>
            <methods>
                <method id="GetAttributeFlags">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <presentation>
                <details>
                    <items>
                        <item id="col:col1">
                            <rank>10</rank>
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <rank>10</rank>
                                    <items>
                                        <item id="name">
                                            <rank>10</rank>
                                        </item>
                                        <item id="org_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="status">
                                            <rank>30</rank>
                                        </item>
                                        <item id="business_criticity">
                                            <rank>40</rank>
                                        </item>
                                        <item id="location_id">
                                            <rank>50</rank>
                                        </item>
                                        <item id="workstation_id">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:moreinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="brand_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="model_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="serialnumber">
                                            <rank>80</rank>
                                        </item>
                                        <item id="asset_number">
                                            <rank>90</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="col:col2">
                            <rank>20</rank>
                            <items>
                                <item id="fieldset:Server:Date">
                                    <rank>10</rank>
                                    <items>
                                        <item id="move2production">
                                            <rank>10</rank>
                                        </item>
                                        <item id="purchase_date">
                                            <rank>20</rank>
                                        </item>
                                        <item id="end_of_warranty">
                                            <rank>30</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:otherinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="description">
                                            <rank>10</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="contacts_list">
                            <rank>100</rank>
                        </item>
                        <item id="documents_list">
                            <rank>110</rank>
                        </item>
                        <item id="providercontracts_list">
                            <rank>120</rank>
                        </item>
                        <item id="services_list">
                            <rank>130</rank>
                        </item>
                    </items>
                </details>
                <default_search>
                    <items>
                        <item id="friendlyname">
                            <rank>10</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>20</rank>
                        </item>
                        <item id="location_id">
                            <rank>30</rank>
                        </item>
                        <item id="org_id">
                            <rank>40</rank>
                        </item>
                    </items>
                </default_search>
                <search>
                    <items>
                        <item id="name">
                            <rank>10</rank>
                        </item>
                        <item id="org_id">
                            <rank>20</rank>
                        </item>
                        <item id="status">
                            <rank>30</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>40</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>45</rank>
                        </item>
                        <item id="location_id">
                            <rank>50</rank>
                        </item>
                        <item id="brand_id">
                            <rank>60</rank>
                        </item>
                        <item id="model_id">
                            <rank>70</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>90</rank>
                        </item>
                        <item id="asset_number">
                            <rank>100</rank>
                        </item>
                        <item id="move2production">
                            <rank>110</rank>
                        </item>
                        <item id="purchase_date">
                            <rank>120</rank>
                        </item>
                        <item id="end_of_warranty">
                            <rank>130</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="status">
                            <rank>20</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>30</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>35</rank>
                        </item>
                        <item id="location_id">
                            <rank>40</rank>
                        </item>
                        <item id="brand_id">
                            <rank>50</rank>
                        </item>
                        <item id="model_id">
                            <rank>60</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>70</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="location_id">
                            <rank>20</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>30</rank>
                        </item>
                        <item id="brand_id">
                            <rank>40</rank>
                        </item>
                        <item id="model_id">
                            <rank>50</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="BarcodeScanner" _delta="define">
            <parent>Peripheral</parent>
            <properties>
                <category>bizmodel,searchable</category>
                <abstract>false</abstract>
                <key_type>autoincrement</key_type>
                <db_table>barcodescanner</db_table>
                <db_key_field>id</db_key_field>
                <db_final_class_field />
                <naming>
                    <attributes>
                        <attribute id="name" />
                    </attributes>
                </naming>
                <fields_semantic>
                    <state_attribute>status</state_attribute>
                </fields_semantic>
                <style>
                    <icon>images/barcode-scanner_256.png</icon>
                </style>
                <icon>images/barcode-scanner.png</icon>
                <reconciliation>
                    <attributes>
                        <attribute id="name" />
                        <attribute id="org_id" />
                        <attribute id="organization_name" />
                    </attributes>
                </reconciliation>
            </properties>
            <methods>
                <method id="GetAttributeFlags">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <presentation>
                <details>
                    <items>
                        <item id="col:col1">
                            <rank>10</rank>
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <rank>10</rank>
                                    <items>
                                        <item id="name">
                                            <rank>10</rank>
                                        </item>
                                        <item id="org_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="status">
                                            <rank>30</rank>
                                        </item>
                                        <item id="business_criticity">
                                            <rank>40</rank>
                                        </item>
                                        <item id="location_id">
                                            <rank>50</rank>
                                        </item>
                                        <item id="workstation_id">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:moreinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="brand_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="model_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="serialnumber">
                                            <rank>80</rank>
                                        </item>
                                        <item id="asset_number">
                                            <rank>90</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="col:col2">
                            <rank>20</rank>
                            <items>
                                <item id="fieldset:Server:Date">
                                    <rank>10</rank>
                                    <items>
                                        <item id="move2production">
                                            <rank>10</rank>
                                        </item>
                                        <item id="purchase_date">
                                            <rank>20</rank>
                                        </item>
                                        <item id="end_of_warranty">
                                            <rank>30</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:otherinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="description">
                                            <rank>10</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="contacts_list">
                            <rank>100</rank>
                        </item>
                        <item id="documents_list">
                            <rank>110</rank>
                        </item>
                        <item id="providercontracts_list">
                            <rank>120</rank>
                        </item>
                        <item id="services_list">
                            <rank>130</rank>
                        </item>
                    </items>
                </details>
                <default_search>
                    <items>
                        <item id="friendlyname">
                            <rank>10</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>20</rank>
                        </item>
                        <item id="location_id">
                            <rank>30</rank>
                        </item>
                        <item id="org_id">
                            <rank>40</rank>
                        </item>
                    </items>
                </default_search>
                <search>
                    <items>
                        <item id="name">
                            <rank>10</rank>
                        </item>
                        <item id="org_id">
                            <rank>20</rank>
                        </item>
                        <item id="status">
                            <rank>30</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>40</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>45</rank>
                        </item>
                        <item id="location_id">
                            <rank>50</rank>
                        </item>
                        <item id="brand_id">
                            <rank>60</rank>
                        </item>
                        <item id="model_id">
                            <rank>70</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>90</rank>
                        </item>
                        <item id="asset_number">
                            <rank>100</rank>
                        </item>
                        <item id="move2production">
                            <rank>110</rank>
                        </item>
                        <item id="purchase_date">
                            <rank>120</rank>
                        </item>
                        <item id="end_of_warranty">
                            <rank>130</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="status">
                            <rank>20</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>30</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>35</rank>
                        </item>
                        <item id="location_id">
                            <rank>40</rank>
                        </item>
                        <item id="brand_id">
                            <rank>50</rank>
                        </item>
                        <item id="model_id">
                            <rank>60</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>70</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="location_id">
                            <rank>20</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>30</rank>
                        </item>
                        <item id="brand_id">
                            <rank>40</rank>
                        </item>
                        <item id="model_id">
                            <rank>50</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="ConferenceSystem" _delta="define">
            <parent>TelephonyCI</parent>
            <properties>
                <category>bizmodel,searchable</category>
                <abstract>false</abstract>
                <key_type>autoincrement</key_type>
                <db_table>conferencesystem</db_table>
                <db_key_field>id</db_key_field>
                <db_final_class_field />
                <naming>
                    <attributes>
                        <attribute id="name" />
                    </attributes>
                </naming>
                <fields_semantic>
                    <state_attribute>status</state_attribute>
                </fields_semantic>
                <style>
                    <icon>images/conference-system_256.png</icon>
                </style>
                <icon>images/conference-system.png</icon>
                <display_template />
                <reconciliation>
                    <attributes>
                        <attribute id="name" />
                        <attribute id="org_id" />
                        <attribute id="organization_name" />
                    </attributes>
                </reconciliation>
            </properties>
            <methods>
                <method id="GetAttributeFlags">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <presentation>
                <details>
                    <items>
                        <item id="col:col1">
                            <rank>10</rank>
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <rank>10</rank>
                                    <items>
                                        <item id="name">
                                            <rank>10</rank>
                                        </item>
                                        <item id="org_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="status">
                                            <rank>30</rank>
                                        </item>
                                        <item id="business_criticity">
                                            <rank>40</rank>
                                        </item>
                                        <item id="location_id">
                                            <rank>50</rank>
                                        </item>
                                        <item id="workstation_id" _delta="define">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:moreinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="brand_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="model_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="phonenumber">
                                            <rank>30</rank>
                                        </item>
                                        <item id="serialnumber">
                                            <rank>80</rank>
                                        </item>
                                        <item id="asset_number">
                                            <rank>90</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="col:col2">
                            <rank>20</rank>
                            <items>
                                <item id="fieldset:Server:Date">
                                    <rank>10</rank>
                                    <items>
                                        <item id="move2production">
                                            <rank>10</rank>
                                        </item>
                                        <item id="purchase_date">
                                            <rank>20</rank>
                                        </item>
                                        <item id="end_of_warranty">
                                            <rank>30</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:otherinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="description">
                                            <rank>10</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="contacts_list">
                            <rank>100</rank>
                        </item>
                        <item id="documents_list">
                            <rank>110</rank>
                        </item>
                        <item id="providercontracts_list">
                            <rank>140</rank>
                        </item>
                        <item id="services_list">
                            <rank>150</rank>
                        </item>
                    </items>
                </details>
                <default_search>
                    <items>
                        <item id="friendlyname">
                            <rank>10</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>20</rank>
                        </item>
                        <item id="location_id">
                            <rank>30</rank>
                        </item>
                        <item id="org_id">
                            <rank>40</rank>
                        </item>
                    </items>
                </default_search>
                <search>
                    <items>
                        <item id="name">
                            <rank>10</rank>
                        </item>
                        <item id="org_id">
                            <rank>20</rank>
                        </item>
                        <item id="status">
                            <rank>30</rank>
                        </item>
                        <item id="business_criticity">
                            <rank>40</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>45</rank>
                        </item>
                        <item id="location_id">
                            <rank>50</rank>
                        </item>
                        <item id="brand_id">
                            <rank>60</rank>
                        </item>
                        <item id="model_id">
                            <rank>70</rank>
                        </item>
                        <item id="phonenumber">
                            <rank>80</rank>
                        </item>
                        <item id="serialnumber">
                            <rank>90</rank>
                        </item>
                        <item id="asset_number">
                            <rank>100</rank>
                        </item>
                        <item id="move2production">
                            <rank>110</rank>
                        </item>
                        <item id="purchase_date">
                            <rank>120</rank>
                        </item>
                        <item id="end_of_warranty">
                            <rank>130</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="org_id">
                            <rank>10</rank>
                        </item>
                        <item id="status">
                            <rank>20</rank>
                        </item>
                        <item id="location_id">
                            <rank>30</rank>
                        </item>
                        <item id="workstation_id">
                            <rank>35</rank>
                        </item>
                        <item id="brand_id">
                            <rank>40</rank>
                        </item>
                        <item id="model_id">
                            <rank>50</rank>
                        </item>
                        <item id="phonenumber">
                            <rank>60</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="workstation_id">
                            <rank>25</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="MobilePhone" _delta="must_exist">
            <methods>
                <method id="GetAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <presentation>
                <details>
                    <items>
                        <item id="name" _delta="delete" />
                        <item id="org_id" _delta="delete" />
                        <item id="status" _delta="delete" />
                        <item id="business_criticity" _delta="delete" />
                        <item id="location_id" _delta="delete" />
                        <item id="brand_id" _delta="delete" />
                        <item id="model_id" _delta="delete" />
                        <item id="phonenumber" _delta="delete" />
                        <item id="imei" _delta="delete" />
                        <item id="hw_pin" _delta="delete" />
                        <item id="serialnumber" _delta="delete" />
                        <item id="asset_number" _delta="delete" />
                        <item id="move2production" _delta="delete" />
                        <item id="purchase_date" _delta="delete" />
                        <item id="end_of_warranty" _delta="delete" />
                        <item id="description" _delta="delete" />
                        <item id="col:col1" _delta="define">
                            <rank>10</rank>
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <rank>10</rank>
                                    <items>
                                        <item id="name">
                                            <rank>10</rank>
                                        </item>
                                        <item id="org_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="status">
                                            <rank>30</rank>
                                        </item>
                                        <item id="business_criticity">
                                            <rank>40</rank>
                                        </item>
                                        <item id="location_id">
                                            <rank>50</rank>
                                        </item>
                                        <item id="workstation_id">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:moreinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="brand_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="model_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="phonenumber">
                                            <rank>30</rank>
                                        </item>
                                        <item id="imei">
                                            <rank>40</rank>
                                        </item>
                                        <item id="hw_pin">
                                            <rank>50</rank>
                                        </item>
                                        <item id="serialnumber">
                                            <rank>80</rank>
                                        </item>
                                        <item id="asset_number">
                                            <rank>90</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item >
                        <item id="col:col2" _delta="define">
                            <rank>20</rank>
                            <items>
                                <item id="fieldset:Server:Date">
                                    <rank>10</rank>
                                    <items>
                                        <item id="move2production">
                                            <rank>10</rank>
                                        </item>
                                        <item id="purchase_date">
                                            <rank>20</rank>
                                        </item>
                                        <item id="end_of_warranty">
                                            <rank>30</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:otherinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="description">
                                            <rank>10</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                    </items>
                </details>
                <default_search>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>25</rank>
                        </item>
                    </items>
                </default_search>
                <search>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>45</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>35</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>25</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="IPPhone" _delta="must_exist">
            <methods>
                <method id="GetAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetAttributeFlags($sAttCode, &$aReasons = array(), $sTargetState = '')
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_READONLY | parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState));
						    return parent::GetAttributeFlags($sAttCode, $aReasons, $sTargetState);
					    }]]>
                    </code>
                </method>
                <method id="GetInitialStateAttributeFlags" _delta="define">
                    <static>false</static>
                    <access>public</access>
                    <type>Overload-DBObject</type>
                    <code>
                        <![CDATA[public function GetInitialStateAttributeFlags($sAttCode, &$aReasons = array())
					    {
						    // HACK: Make workstation_id field readonly to prevent update loops from Workstation
						    if (($sAttCode == 'workstation_id'))
							    return(OPT_ATT_HIDDEN | parent::GetInitialStateAttributeFlags($sAttCode, $aReasons));
						    return parent::GetInitialStateAttributeFlags($sAttCode, $aReasons);
					    }]]>
                    </code>
                </method>
            </methods>
            <presentation>
                <details>
                    <items>
                        <item id="name" _delta="delete" />
                        <item id="org_id" _delta="delete" />
                        <item id="status" _delta="delete" />
                        <item id="business_criticity" _delta="delete" />
                        <item id="location_id" _delta="delete" />
                        <item id="brand_id" _delta="delete" />
                        <item id="model_id" _delta="delete" />
                        <item id="phonenumber" _delta="delete" />
                        <item id="serialnumber" _delta="delete" />
                        <item id="asset_number" _delta="delete" />
                        <item id="move2production" _delta="delete" />
                        <item id="purchase_date" _delta="delete" />
                        <item id="end_of_warranty" _delta="delete" />
                        <item id="description" _delta="delete" />
                        <item id="col:col1" _delta="define">
                            <rank>10</rank>
                            <items>
                                <item id="fieldset:Server:baseinfo">
                                    <rank>10</rank>
                                    <items>
                                        <item id="name">
                                            <rank>10</rank>
                                        </item>
                                        <item id="org_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="status">
                                            <rank>30</rank>
                                        </item>
                                        <item id="business_criticity">
                                            <rank>40</rank>
                                        </item>
                                        <item id="location_id">
                                            <rank>50</rank>
                                        </item>
                                        <item id="workstation_id">
                                            <rank>60</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:moreinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="brand_id">
                                            <rank>10</rank>
                                        </item>
                                        <item id="model_id">
                                            <rank>20</rank>
                                        </item>
                                        <item id="phonenumber">
                                            <rank>30</rank>
                                        </item>
                                        <item id="serialnumber">
                                            <rank>80</rank>
                                        </item>
                                        <item id="asset_number">
                                            <rank>90</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                        <item id="col:col2" _delta="define">
                            <rank>20</rank>
                            <items>
                                <item id="fieldset:Server:Date">
                                    <rank>10</rank>
                                    <items>
                                        <item id="move2production">
                                            <rank>10</rank>
                                        </item>
                                        <item id="purchase_date">
                                            <rank>20</rank>
                                        </item>
                                        <item id="end_of_warranty">
                                            <rank>30</rank>
                                        </item>
                                    </items>
                                </item>
                                <item id="fieldset:Server:otherinfo">
                                    <rank>20</rank>
                                    <items>
                                        <item id="description">
                                            <rank>10</rank>
                                        </item>
                                    </items>
                                </item>
                            </items>
                        </item>
                    </items>
                </details>
                <default_search>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>25</rank>
                        </item>
                    </items>
                </default_search>
                <search>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>45</rank>
                        </item>
                    </items>
                </search>
                <list>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>35</rank>
                        </item>
                    </items>
                </list>
                <summary>
                    <items>
                        <item id="workstation_id" _delta="define">
                            <rank>25</rank>
                        </item>
                    </items>
                </summary>
            </presentation>
        </class>
        <class id="Model">
            <fields>
                <field id="type" xsi:type="AttributeEnum">
                    <values>
                        <value id="DockingStation" _delta="define">
                            <code>DockingStation</code>
                        </value>
                        <value id="Monitor" _delta="define">
                            <code>Monitor</code>
                        </value>
                        <value id="Keyboard" _delta="define">
                            <code>Keyboard</code>
                        </value>
                        <value id="Mouse" _delta="define">
                            <code>Mouse</code>
                        </value>
                        <value id="Headset" _delta="define">
                            <code>Headset</code>
                        </value>
                        <value id="Scanner" _delta="define">
                            <code>Scanner</code>
                        </value>
                        <value id="BarcodeScanner" _delta="define">
                            <code>BarcodeScanner</code>
                        </value>
                        <value id="ConferenceSystem" _delta="define">
                            <code>ConferenceSystem</code>
                        </value>
                    </values>
                </field>
            </fields>
        </class>
    </classes>
    <menus>
        <!-- add Classes to Configuration Management -->
        <menu id="ConfigManagementOverview" xsi:type="DashboardMenuNode" _delta="must_exist">
            <definition>
                <cells>
                    <cell id="2">
                        <dashlets>
                            <dashlet id="25.5" xsi:type="DashletBadge" _delta="define">
                                <rank>0.5</rank>
                                <class>Workstation</class>
                            </dashlet>
                            <dashlet id="28.5" xsi:type="DashletBadge" _delta="define">
                                <rank>3.5</rank>
                                <class>ConferenceSystem</class>
                            </dashlet>
                            <dashlet id="peripheral.10" xsi:type="DashletBadge" _delta="define">
                                <rank>10</rank>
                                <class>DockingStation</class>
                            </dashlet>
                            <dashlet id="peripheral.20" xsi:type="DashletBadge" _delta="define">
                                <rank>20</rank>
                                <class>Monitor</class>
                            </dashlet>
                            <dashlet id="peripheral.30" xsi:type="DashletBadge" _delta="define">
                                <rank>30</rank>
                                <class>Keyboard</class>
                            </dashlet>
                            <dashlet id="peripheral.40" xsi:type="DashletBadge" _delta="define">
                                <rank>40</rank>
                                <class>Mouse</class>
                            </dashlet>
                            <dashlet id="peripheral.50" xsi:type="DashletBadge" _delta="define">
                                <rank>50</rank>
                                <class>Headset</class>
                            </dashlet>
                            <dashlet id="peripheral.60" xsi:type="DashletBadge" _delta="define">
                                <rank>60</rank>
                                <class>Scanner</class>
                            </dashlet>
                            <dashlet id="peripheral.70" xsi:type="DashletBadge" _delta="define">
                                <rank>70</rank>
                                <class>BarcodeScanner</class>
                            </dashlet>
                        </dashlets>
                    </cell>
                </cells>
            </definition>
        </menu>
        <!-- add additional Menu for End-User devices -->
        <menu id="EndUserSpace" xsi:type="DashboardMenuNode" _delta="define">
            <rank>1.100</rank>
            <parent>ConfigManagement</parent>
            <definition>
                <layout>DashboardLayoutOneCol</layout>
                <title />
                <cells>
                    <cell id="peripherals-100">
                        <rank>1</rank>
                        <dashlets>
                            <dashlet id="peripherals-101" xsi:type="DashletHeaderStatic">
                                <rank>1</rank>
                                <title>Menu:EndUserSpace:Workstation</title>
                                <icon>br-peripherals/images/workstation.png</icon>
                            </dashlet>
                            <dashlet id="peripherals-111" xsi:type="DashletBadge">
                                <rank>11</rank>
                                <class>Workstation</class>
                            </dashlet>
                            <dashlet id="peripherals-112" xsi:type="DashletBadge">
                                <rank>12</rank>
                                <class>PC</class>
                            </dashlet>
                            <dashlet id="peripherals-113" xsi:type="DashletBadge">
                                <rank>13</rank>
                                <class>DockingStation</class>
                            </dashlet>
                            <dashlet id="peripherals-114" xsi:type="DashletBadge">
                                <rank>14</rank>
                                <class>Monitor</class>
                            </dashlet>
                            <dashlet id="peripherals-115" xsi:type="DashletBadge">
                                <rank>15</rank>
                                <class>Keyboard</class>
                            </dashlet>
                            <dashlet id="peripherals-116" xsi:type="DashletBadge">
                                <rank>16</rank>
                                <class>Mouse</class>
                            </dashlet>
                            <dashlet id="peripherals-117" xsi:type="DashletBadge">
                                <rank>17</rank>
                                <class>Headset</class>
                            </dashlet>
                        </dashlets>
                    </cell>
                    <cell id="peripherals-200">
                        <rank>2</rank>
                        <dashlets>
                            <dashlet id="peripherals-201" xsi:type="DashletHeaderStatic">
                                <rank>1</rank>
                                <title>Menu:EndUserSpace:Phone</title>
                                <icon>itop-endusers-devices/images/ipphone.png</icon>
                            </dashlet>
                            <dashlet id="peripherals-211" xsi:type="DashletBadge">
                                <rank>11</rank>
                                <class>Phone</class>
                            </dashlet>
                            <dashlet id="peripherals-212" xsi:type="DashletBadge">
                                <rank>12</rank>
                                <class>IPPhone</class>
                            </dashlet>
                            <dashlet id="peripherals-213" xsi:type="DashletBadge">
                                <rank>14</rank>
                                <class>ConferenceSystem</class>
                            </dashlet>
                            <dashlet id="peripherals-214" xsi:type="DashletBadge">
                                <rank>14</rank>
                                <class>MobilePhone</class>
                            </dashlet>
                            <dashlet id="peripherals-215" xsi:type="DashletBadge">
                                <rank>15</rank>
                                <class>Tablet</class>
                            </dashlet>
                        </dashlets>
                    </cell>
                    <cell id="peripherals-300">
                        <rank>3</rank>
                        <dashlets>
                            <dashlet id="peripherals-301" xsi:type="DashletHeaderStatic">
                                <rank>1</rank>
                                <title>Menu:EndUserSpace:Printer</title>
                                <icon>itop-endusers-devices/images/printer.png</icon>
                            </dashlet>
                            <dashlet id="peripherals-311" xsi:type="DashletBadge">
                                <rank>11</rank>
                                <class>Printer</class>
                            </dashlet>
                        </dashlets>
                    </cell>
                    <cell id="peripherals-400">
                        <rank>4</rank>
                        <dashlets>
                            <dashlet id="peripherals-401" xsi:type="DashletHeaderStatic">
                                <rank>1</rank>
                                <title>Menu:EndUserSpace:Scanner</title>
                                <icon>br-peripherals/images/scanner.png</icon>
                            </dashlet>
                            <dashlet id="peripherals-411" xsi:type="DashletBadge">
                                <rank>11</rank>
                                <class>Scanner</class>
                            </dashlet>
                            <dashlet id="peripherals-412" xsi:type="DashletBadge">
                                <rank>12</rank>
                                <class>BarcodeScanner</class>
                            </dashlet>
                        </dashlets>
                    </cell>
                    <cell id="peripherals-900">
                        <rank>9</rank>
                        <dashlets>
                            <dashlet id="peripherals-901" xsi:type="DashletHeaderStatic">
                                <rank>1</rank>
                                <title>Menu:ConfigManagement:Misc</title>
                                <icon>itop-config-mgmt/images/middleware.png</icon>
                            </dashlet>
                            <dashlet id="peripherals-911" xsi:type="DashletBadge">
                                <rank>11</rank>
                                <class>Peripheral</class>
                            </dashlet>
                            <!-- CostCenter -->
                        </dashlets>
                    </cell>
                </cells>
            </definition>
        </menu>
    </menus>
    <user_rights>
        <groups>
            <group id="Configuration">
                <classes>
                    <class id="Workstation" _delta="define" />
                    <class id="DockingStation" _delta="define" />
                    <class id="Monitor" _delta="define" />
                    <class id="Keyboard" _delta="define" />
                    <class id="Mouse" _delta="define" />
                    <class id="Headset" _delta="define" />
                    <class id="Scanner" _delta="define" />
                    <class id="BarcodeScanner" _delta="define" />
                    <class id="ConferenceSystem" _delta="define" />
                </classes>
            </group>
        </groups>
    </user_rights>
</itop_design>
